---
---

<section class="my-16 px-4">
  <div class="max-w-4xl mx-auto bg-white dark:bg-background rounded-lg shadow-lg border border-gray-100 dark:border-border overflow-hidden">
  
    <!-- Main Content -->
    <div class="p-8 md:p-12">
      <h2 class="text-2xl md:text-3xl font-bold mb-6 text-center">
        The Primal Movement Newsletter
      </h2>
      
      <div class="text-center mb-8">
        <p class="text-lg md:text-xl text-gray-700 dark:text-gray-300 mb-4">
          Hey, I'm Ryan. Every Monday, I share:
        </p>
        <ul class="text-left inline-block space-y-2">
          <li class="flex items-start gap-2">
            <span class="text-accent text-xl">→</span>
            <span><strong>3 primal movement patterns</strong> to unlock your body</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-accent text-xl">→</span>
            <span><strong>2 recovery techniques</strong> that actually work</span>
          </li>
          <li class="flex items-start gap-2">
            <span class="text-accent text-xl">→</span>
            <span><strong>1 mindset breakthrough</strong> from elite performers</span>
          </li>
        </ul>
        <p class="text-sm text-gray-600 dark:text-gray-400 mt-4">
          Join 10,000+ athletes and coaches getting 1% better every week
        </p>
      </div>
    
      <!-- Form -->
      <div class="max-w-md mx-auto mb-8">
        <form 
          id="newsletter-form"
          class="flex flex-col gap-3"
          netlify
          name="newsletter"
          method="POST"
        >
          <input type="hidden" name="form-name" value="newsletter" />
          
          <input
            type="email"
            name="email"
            id="email"
            required
            placeholder="Your best email"
            class="w-full rounded-md border border-border bg-background px-4 py-3 text-foreground placeholder:text-muted-foreground focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent"
          />
          
          <button
            type="submit"
            class="w-full rounded-md bg-accent px-6 py-3 font-semibold text-white transition-all hover:bg-accent/90 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 flex items-center justify-center gap-2"
          >
            Get Free Movement Tips
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </button>
        </form>
        <p class="text-xs text-center text-gray-500 mt-2">
          No spam. Unsubscribe anytime.
        </p>
      </div>
    
      <!-- Social Proof -->
      <div class="text-center mb-8">
        <div class="flex justify-center items-center gap-1 mb-2">
          <span class="text-yellow-400">★★★★★</span>
        </div>
        <p class="text-sm text-gray-600 dark:text-gray-400">
          Rated 4.9/5 by 500+ newsletter subscribers
        </p>
      </div>
    
      <!-- Success/Error messages -->
      <div id="newsletter-success" class="hidden">
      <p class="flex items-center justify-center gap-2 text-sm text-green-600 dark:text-green-400">
        <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        You're in! Check your email to confirm.
      </p>
    </div>
    
      <div id="newsletter-error" class="hidden">
        <p class="text-sm text-red-600 dark:text-red-400 text-center">
          Something went wrong. Please try again.
        </p>
      </div>
    </div>
    
    <!-- Bottom Testimonials Section -->
    <div class="bg-gray-50 dark:bg-muted/20 px-8 py-6 border-t border-gray-100 dark:border-border">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm">
        <div>
          <p class="text-gray-700 dark:text-gray-300 font-medium mb-1">
            "This newsletter transformed my training approach completely."
          </p>
          <p class="text-gray-500 dark:text-gray-400 text-xs">
            — Sarah K., CrossFit Coach
          </p>
        </div>
        <div>
          <p class="text-gray-700 dark:text-gray-300 font-medium mb-1">
            "Better than any $500 course I've taken. Pure gold every week."
          </p>
          <p class="text-gray-500 dark:text-gray-400 text-xs">
            — Mike D., Personal Trainer
          </p>
        </div>
        <div>
          <p class="text-gray-700 dark:text-gray-300 font-medium mb-1">
            "Monday mornings are now my favorite part of the week!"
          </p>
          <p class="text-gray-500 dark:text-gray-400 text-xs">
            — Lisa R., Yoga Instructor
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('astro:page-load', () => {
    const form = document.getElementById('newsletter-form') as HTMLFormElement;
    const successMessage = document.getElementById('newsletter-success');
    const errorMessage = document.getElementById('newsletter-error');
    const submitButton = form?.querySelector('button[type="submit"]') as HTMLButtonElement;
    const emailInput = form?.querySelector('input[type="email"]') as HTMLInputElement;

    if (form && successMessage && errorMessage && submitButton) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // Reset messages
        successMessage.classList.add('hidden');
        errorMessage.classList.add('hidden');
        
        // Disable form
        submitButton.disabled = true;
        submitButton.innerHTML = `
          <span class="relative z-10 flex items-center justify-center gap-2">
            <svg class="h-4 w-4 animate-spin" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Subscribing...
          </span>
        `;
        
        try {
          const formData = new FormData(form);
          const response = await fetch('/', {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: new URLSearchParams(formData as any).toString()
          });
          
          if (response.ok) {
            successMessage.classList.remove('hidden');
            emailInput.value = '';
            
            // Track conversion
            if (typeof window !== 'undefined' && 'gtag' in window) {
              (window as any).gtag('event', 'sign_up', {
                method: 'newsletter'
              });
            }
          } else {
            throw new Error('Form submission failed');
          }
        } catch (error) {
          console.error('Newsletter submission error:', error);
          errorMessage.classList.remove('hidden');
        } finally {
          // Re-enable form
          submitButton.disabled = false;
          submitButton.innerHTML = `Get Free Movement Tips <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" /></svg>`;
        }
      });
    }
  });
</script>